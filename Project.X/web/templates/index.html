<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AQMSS - AI Market Quality Dashboard</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Header Navigation -->
        <header class="navbar">
            <div class="navbar-container">
                <div class="navbar-brand">
                    <div class="logo-wrapper">
                        <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
                            <rect width="32" height="32" rx="6" fill="url(#gradient)"/>
                            <path d="M8 20L12 14L16 18L24 8" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="24" cy="8" r="2" fill="white"/>
                            <defs>
                                <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                                    <stop offset="0%" stop-color="#2962FF"/>
                                    <stop offset="100%" stop-color="#0033CC"/>
                                </linearGradient>
                            </defs>
                        </svg>
                        <div>
                            <h1 class="logo">AQMSS</h1>
                            <p class="tagline">AI Market Quality System</p>
                        </div>
                    </div>
                </div>
                <nav class="navbar-menu">
                    <a href="#" class="nav-link active" data-tab="markets">
                        <span class="nav-icon">üìà</span> Markets
                    </a>
                    <a href="#" class="nav-link" data-tab="insights">
                        <span class="nav-icon">üí°</span> Insights
                    </a>
                    <a href="#" class="nav-link" data-tab="charts">
                        <span class="nav-icon">üìä</span> Analytics
                    </a>
                    <a href="#" class="nav-link" data-tab="assistant">
                        <span class="nav-icon">ü§ñ</span> AI Assistant
                    </a>
                </nav>
                <div class="navbar-actions">
                    <div class="market-status">
                        <span class="status-dot"></span>
                        <span class="status-text">Live</span>
                    </div>
                    <div class="navbar-time">
                        <span id="current-time"></span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Container -->
        <div class="container">
            <!-- Sidebar Stats -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h3>Market Overview</h3>
                    <button class="btn-icon" onclick="loadDashboardStats()" title="Refresh">üîÑ</button>
                </div>
                <div class="stats-panel">
                    <div class="stat-card primary-stat">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-content">
                            <div class="stat-label">Total Markets</div>
                            <div class="stat-value" id="stat-total">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-content">
                            <div class="stat-label">Avg Quality</div>
                            <div class="stat-value quality-text" id="stat-avg">50%</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ú®</div>
                        <div class="stat-content">
                            <div class="stat-label">High Quality</div>
                            <div class="stat-value bullish" id="stat-high">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-content">
                            <div class="stat-label">Bullish</div>
                            <div class="stat-value bullish" id="stat-bullish">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìâ</div>
                        <div class="stat-content">
                            <div class="stat-label">Bearish</div>
                            <div class="stat-value bearish" id="stat-bearish">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö°</div>
                        <div class="stat-content">
                            <div class="stat-label">Volatile</div>
                            <div class="stat-value warning" id="stat-volatile">0</div>
                        </div>
                    </div>
                </div>

                <!-- AQMSS Core Score -->
                <div class="ai-summary-card">
                    <div class="ai-summary-header">
                        <span class="ai-badge">AQMSS</span>
                        <span>Core Score</span>
                    </div>
                    <div class="aqmss-core-info">
                        <div class="aqmss-score-display">
                            <span class="aqmss-big-score" id="aqmss-score">--/10</span>
                            <span class="aqmss-condition" id="aqmss-condition">Loading...</span>
                        </div>
                        <div class="aqmss-ai-prob">
                            <span class="aqmss-label">AI Quality Prob:</span>
                            <span class="aqmss-value" id="ai-probability">--</span>
                        </div>
                    </div>
                </div>

                <!-- AI Market Pulse -->
                <div class="ai-summary-card">
                    <div class="ai-summary-header">
                        <span class="ai-badge">AI</span>
                        <span>Market Pulse</span>
                    </div>
                    <div class="ai-summary-content" id="ai-pulse">
                        Analyzing market conditions...
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Markets Tab -->
                <section id="markets-tab" class="tab-content active">
                    <div class="section-header">
                        <div>
                            <h2>Market Rates</h2>
                            <p class="section-subtitle">Real-time market quality monitoring powered by AQMSS</p>
                        </div>
                        <div class="filters">
                            <div class="search-wrapper">
                                <span class="search-icon">üîç</span>
                                <input type="text" id="search-market" placeholder="Search markets..." class="search-input">
                            </div>
                            <select id="quality-filter" class="filter-select">
                                <option value="">All Quality Levels</option>
                                <option value="high">High Quality (&gt;75)</option>
                                <option value="medium">Medium (50-75)</option>
                                <option value="low">Low Quality (&lt;50)</option>
                            </select>
                            <button class="btn-refresh" onclick="loadMarkets()">
                                <span class="btn-icon">üîÑ</span> Refresh
                            </button>
                            <button class="btn-toggle" onclick="toggleAutoRefresh()" id="auto-refresh-btn">
                                <span class="btn-icon">‚è±Ô∏è</span> Auto
                            </button>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="markets-table" id="markets-table">
                            <thead>
                                <tr>
                                    <th class="sortable" data-sort="symbol">
                                        <div class="th-content">Symbol <span class="sort-arrow">‚Üï</span></div>
                                    </th>
                                    <th class="sortable" data-sort="price">
                                        <div class="th-content">Price <span class="sort-arrow">‚Üï</span></div>
                                    </th>
                                    <th class="sortable" data-sort="change">
                                        <div class="th-content">Change 24H <span class="sort-arrow">‚Üï</span></div>
                                    </th>
                                    <th class="sortable" data-sort="volume">
                                        <div class="th-content">Volume <span class="sort-arrow">‚Üï</span></div>
                                    </th>
                                    <th class="sortable" data-sort="liquidity">
                                        <div class="th-content">Liquidity <span class="sort-arrow">‚Üï</span></div>
                                    </th>
                                    <th class="sortable" data-sort="volatility">
                                        <div class="th-content">Volatility <span class="sort-arrow">‚Üï</span></div>
                                    </th>
                                    <th class="sortable" data-sort="momentum">
                                        <div class="th-content">Momentum <span class="sort-arrow">‚Üï</span></div>
                                    </th>
                                    <th class="sortable" data-sort="quality_score">
                                        <div class="th-content">Quality Score <span class="sort-arrow">‚Üï</span></div>
                                    </th>
                                    <th>Condition</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="table-body">
                                <tr class="loading">
                                    <td colspan="10">
                                        <div class="loader"></div>
                                        <span>Loading market data...</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Insights Tab -->
                <section id="insights-tab" class="tab-content">
                    <div class="section-header">
                        <div>
                            <h2>AI Market Insights</h2>
                            <p class="section-subtitle">Machine learning powered analysis from your AQMSS model</p>
                        </div>
                        <button class="btn-refresh" onclick="loadInsights()">
                            <span class="btn-icon">üîÑ</span> Refresh Insights
                        </button>
                    </div>
                    <div class="insights-grid" id="insights-container">
                        <div class="loading-state">
                            <div class="loader"></div>
                            <span>Generating insights...</span>
                        </div>
                    </div>
                </section>

                <!-- Analytics Tab -->
                <section id="charts-tab" class="tab-content">
                    <div class="section-header">
                        <div>
                            <h2>Market Analytics</h2>
                            <p class="section-subtitle">Visual analysis and AQMSS factor breakdown</p>
                        </div>
                    </div>
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>üìä Quality Distribution</h3>
                                <span class="chart-badge">Live</span>
                            </div>
                            <canvas id="qualityChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>üìà Momentum Overview</h3>
                                <span class="chart-badge">Live</span>
                            </div>
                            <canvas id="momentumChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>‚ö° Volatility Distribution</h3>
                                <span class="chart-badge">Live</span>
                            </div>
                            <canvas id="volatilityChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>üíß Liquidity Analysis</h3>
                                <span class="chart-badge">Live</span>
                            </div>
                            <canvas id="liquidityChart"></canvas>
                        </div>
                        <div class="chart-card chart-card-wide">
                            <div class="chart-header">
                                <h3>üéØ AQMSS Factor Breakdown</h3>
                                <span class="chart-badge">AQMSS</span>
                            </div>
                            <canvas id="aqmssFactorChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- AI Assistant Tab -->
                <section id="assistant-tab" class="tab-content">
                    <div class="section-header">
                        <div>
                            <h2>ü§ñ AI Market Assistant</h2>
                            <p class="section-subtitle">Powered by AQMSS machine learning model</p>
                        </div>
                    </div>
                    <div class="assistant-layout">
                        <div class="chat-container">
                            <div class="chat-header">
                                <div class="chat-status">
                                    <span class="status-indicator online"></span>
                                    <span>AI Assistant Active</span>
                                </div>
                                <button class="btn-clear" onclick="clearChat()">Clear Chat</button>
                            </div>
                            <div class="chat-messages" id="chat-messages">
                                <div class="chat-message ai-message">
                                    <div class="message-avatar">ü§ñ</div>
                                    <div class="message-bubble">
                                        <div class="message-sender">AI Assistant</div>
                                        <div class="message-content">
                                            Hello! I'm your AQMSS AI Assistant powered by machine learning. I can help you with:
                                            <ul style="margin:10px 0;padding-left:20px;">
                                                <li>Market quality analysis (AQMSS scoring)</li>
                                                <li>Trading strategy recommendations</li>
                                                <li>Volatility and liquidity insights</li>
                                                <li>AI prediction confidence levels</li>
                                            </ul>
                                            Ask me anything about your markets!
                                        </div>
                                        <div class="message-time">Now</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-input-area">
                                <div class="quick-questions">
                                    <button class="quick-btn" onclick="quickQuestion('What are the best quality markets?')">üéØ Best Markets</button>
                                    <button class="quick-btn" onclick="quickQuestion('Which markets are most volatile?')">‚ö° Volatile</button>
                                    <button class="quick-btn" onclick="quickQuestion('Show me bullish opportunities')">üìà Bullish</button>
                                    <button class="quick-btn" onclick="quickQuestion('What is my risk level?')">üõ°Ô∏è Risk</button>
                                </div>
                                <div class="input-row">
                                    <input type="text" id="chat-input" placeholder="Ask about markets, quality, strategies..." class="chat-input" autocomplete="off">
                                    <button onclick="sendMessage()" class="btn-send">
                                        <span>Send</span>
                                        <span class="send-icon">‚Üí</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="assistant-sidebar">
                            <div class="suggestion-card">
                                <h4>üí° Quick Tips</h4>
                                <div class="tip-list">
                                    <div class="tip-item">AQMSS scores above 7.5/10 = HIGH QUALITY MARKET</div>
                                    <div class="tip-item">Monitor volatility regime before entering trades</div>
                                    <div class="tip-item">High liquidity markets offer better execution</div>
                                    <div class="tip-item">AI probability above 60% indicates favorable conditions</div>
                                </div>
                            </div>
                            <div class="ai-metrics">
                                <h4>AI Model Stats</h4>
                                <div class="metric-item">
                                    <span>Model Accuracy</span>
                                    <span class="metric-value" id="model-accuracy">Loading...</span>
                                </div>
                                <div class="metric-item">
                                    <span>Data Points</span>
                                    <span class="metric-value" id="data-points">Loading...</span>
                                </div>
                                <div class="metric-item">
                                    <span>Model Type</span>
                                    <span class="metric-value">RandomForest</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Market Detail Modal -->
        <div id="marketModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <div id="modal-body"></div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
